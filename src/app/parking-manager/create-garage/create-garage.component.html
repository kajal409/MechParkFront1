<div class="flex flex-column justify-between">
    <main class="pa4 black-80 spacer">
      <form
        class="measure center mt4 pt4"
        [formGroup]="createGarageForm"
        (ngSubmit)="onSubmit()"
      >
        <fieldset id="create_garage" class="ba b--transparent black ph0 mh0">
          <legend class="f4 fw4 ph0 mh0">Create Garage</legend>
          <div class="mt2">
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label>Name</mat-label>
              <input
                formControlName="name"
                matInput
                placeholder="Name"
              />
              <mat-error class="light-red b" *ngIf="f.name.hasError('required')">
                Required
              </mat-error>
            </mat-form-field>
          </div>
  
          <div class="mt2">
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label>Address</mat-label>
              <textarea
                formControlName="address"
                matInput
                placeholder="Address"
              ></textarea>
              <mat-error class="light-red b" *ngIf="f.address.hasError('required')">
                Required
              </mat-error>
            </mat-form-field>
          </div>
          <div class="mt2">
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label>City</mat-label>
              <input formControlName="city" matInput placeholder="City" />
              <mat-error class="light-red b" *ngIf="f.city.hasError('required')">
                Required
              </mat-error>
            </mat-form-field>
          </div>
          <div class="mt2">
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label>State</mat-label>
              <input
                formControlName="state"
                matInput
                placeholder="State"  [matAutocomplete]="auto" 
              />
              <mat-error class="light-red b" *ngIf="f.state.hasError('required')">
                Required
              </mat-error>
              <mat-autocomplete #auto="matAutocomplete">
                <mat-option  *ngFor="let option of filteredStateOptions | async" [value]="option">
                  {{option}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>
          <div class="mt2">
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label>Phone</mat-label>
              <input
                formControlName="phone"
                type="text"
                matInput
                placeholder="Phone"
              />
              <mat-error class="light-red b" *ngIf="f.phone.hasError('required')">
                Required
              </mat-error>
              <mat-error
                *ngIf="
                  f.phone.hasError('minlength') ||
                  f.phone.hasError('maxlength') ||
                  f.phone.hasError('pattern')
                "
              >
                Invalid Phone Number
              </mat-error>
            </mat-form-field>
          </div>
  
          <div class="mt2">
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label>Parking Rate</mat-label>
              <input
                formControlName="parkingRate"
                matInput
                placeholder="Parking Rate"
              />
              <span matPrefix class="ph2">₹</span>
              <mat-error class="light-red b" *ngIf="f.parkingRate.hasError('required')">
                Required
              </mat-error>
              <mat-error class="light-red b" *ngIf="f.parkingRate.hasError('pattern')">
                Enter a Number
              </mat-error>
            </mat-form-field>
          </div>
  
          <div class="mv4">
            <mat-checkbox
              labelPosition="after"
              color="primary"
              formControlName="hasCleaningService"
              name="hasCleaningService"
              (change)="updateCleaningRate($event)"
              >Cleaning Service</mat-checkbox
            >
          </div>
  
          <div class="mt2" *ngIf="hasCleaningServiceFlag">
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label>Cleaning Rate</mat-label>
              <input
                formControlName="cleaningRate"
                matInput
                placeholder="Cleaning Rate"
              />
              <span matPrefix class="ph2">₹</span>
              <mat-error class="light-red b"
                *ngIf="f.cleaningRate && f.cleaningRate.hasError('required')"
              >
                Required
              </mat-error>
              <mat-error class="light-red b"
                *ngIf="f.cleaningRate && f.cleaningRate.hasError('pattern')"
              >
                Enter a Number
              </mat-error>
            </mat-form-field>
          </div>
        </fieldset>
        <div class="mv2">
          <button class="w-50" mat-stroked-button color="primary" [disabled]="!createGarageForm.valid">Create</button>
          <a routerLink='/parkingmanager'><button class="w-50" mat-stroked-button color="primary">Cancel</button></a>
        </div>
      </form>
    </main>
  
    <footer class="pv4 ph3 ph5-m ph6-l mid-gray">
      <small class="f6 db tc"
        >© 2021 <b class="ttu">MechPark</b> All Rights Reserved</small
      >
      <div class="tc">
        <a href="/language/" title="Language" class="f6 dib ph2 link mid-gray dim"
          >Language</a
        >
        <a href="/terms/" title="Terms" class="f6 dib ph2 link mid-gray dim"
          >Terms of Use</a
        >
        <a href="/privacy/" title="Privacy" class="f6 dib ph2 link mid-gray dim"
          >Privacy</a
        >
      </div>
    </footer>
  </div>
  